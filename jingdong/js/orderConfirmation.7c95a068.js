"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[390],{9174:function(t,s,c){c.d(s,{K:function(){return a}});var e=c(6768),r=c(782);const a=t=>{const s=(0,r.Pj)(),c=s.state.cartList,a=(t,c,e,r)=>{s.commit("changeCartItemInfo",{shopId:t,productId:c,productInfo:e,number:r})},n=(0,e.EW)((()=>{const s=c[t]?.productList||{},e={};for(let t in s){const c=s[t];c.count>0&&(e[t]=c)}return e})),o=(0,e.EW)((()=>{const s=c[t]?.shopName||"";return s})),d=(0,e.EW)((()=>{const s=c[t]?.productList,e={total:0,price:0,allChecked:!0};if(s)for(let t in s){const c=s[t];e.total+=c.count,c.check&&(e.price+=c.count*c.price),c.count>0&&!c.check&&(e.allChecked=!1)}return e.price=e.price.toFixed(2),e}));return{changeCartItemInfo:a,cartList:c,productList:n,shopName:o,calculations:d}}},8111:function(t,s,c){c.r(s),c.d(s,{default:function(){return G}});var e=c(6768);const r={class:"wrapper"};function a(t,s,c,a,n,o){const d=(0,e.g2)("TopArea"),i=(0,e.g2)("ProductList"),_=(0,e.g2)("Order");return(0,e.uX)(),(0,e.CE)("div",r,[(0,e.bF)(d),(0,e.bF)(i),(0,e.bF)(_)])}const n={class:"top"},o={class:"top__header"};function d(t,s,c,r,a,d){return(0,e.uX)(),(0,e.CE)("div",n,[(0,e.Lk)("div",o,[(0,e.Lk)("div",{class:"iconfont top__header__back",onClick:s[0]||(s[0]=(...t)=>r.handleBackClick&&r.handleBackClick(...t))},""),s[1]||(s[1]=(0,e.eW)(" 确实订单 "))]),s[2]||(s[2]=(0,e.Fv)('<div class="top__receiver" data-v-bc42b200><div class="top__receiver__title" data-v-bc42b200>收货地址</div><div class="top__receiver__address" data-v-bc42b200>合肥工业大学翡翠湖校区4号南楼321</div><div class="top__receiver__info" data-v-bc42b200><span class="top__receiver__info__name" data-v-bc42b200>元迪迪（先生）</span><span class="top__receiver__info__name" data-v-bc42b200>66666666666</span></div><div class="iconfont top__receiver__icon" data-v-bc42b200></div></div>',1))])}var i=c(1387),_={name:"TopArea",setup(){const t=(0,i.rd)(),s=()=>{t.back()};return{handleBackClick:s}}},l=c(1241);const u=(0,l.A)(_,[["render",d],["__scopeId","data-v-bc42b200"]]);var p=u,v=c(4232);const m={class:"products"},k={class:"products__title"},h={class:"products__wrapper"},b={class:"products__list"},L=["src"],f={class:"products__item__detail"},C={class:"products__item__title"},I={class:"products__item__price"},O={class:"products__item__single"},g={class:"products__item__total"};function E(t,s,c,r,a,n){return(0,e.uX)(),(0,e.CE)("div",m,[(0,e.Lk)("div",k,(0,v.v_)(r.shopName),1),(0,e.Lk)("div",h,[(0,e.Lk)("div",b,[((0,e.uX)(!0),(0,e.CE)(e.FK,null,(0,e.pI)(r.productList,(t=>((0,e.uX)(),(0,e.CE)("div",{class:"products__item",key:t.id},[(0,e.Lk)("img",{class:"products__item__img",src:t.imgUrl},null,8,L),(0,e.Lk)("div",f,[(0,e.Lk)("h4",C,(0,v.v_)(t.name),1),(0,e.Lk)("p",I,[(0,e.Lk)("span",O,[s[0]||(s[0]=(0,e.Lk)("span",{class:"products__item__yen"},"¥",-1)),(0,e.eW)(" "+(0,v.v_)(t.price)+" x "+(0,v.v_)(t.count),1)]),(0,e.Lk)("span",g,[s[1]||(s[1]=(0,e.Lk)("span",{class:"products__item__yen"},"¥",-1)),(0,e.eW)(" "+(0,v.v_)((t.price*t.count).toFixed(2)),1)])])])])))),128))])])])}var w=c(9174),F={name:"ProductList",setup(){const t=(0,i.lq)(),s=t.params.id,{productList:c,shopName:e}=(0,w.K)(s);return{productList:c,shopName:e}}};const A=(0,l.A)(F,[["render",E],["__scopeId","data-v-12501892"]]);var N=A;const W={class:"order"},X={class:"order__price"},y={key:0,class:"mask"},K={class:"mask__content"},P={class:"mask__content__btns"};function S(t,s,c,r,a,n){return(0,e.uX)(),(0,e.CE)(e.FK,null,[(0,e.Lk)("div",W,[(0,e.Lk)("div",X,[s[3]||(s[3]=(0,e.eW)("实付金额 ")),(0,e.Lk)("b",null,"￥"+(0,v.v_)(r.calculations.price),1)]),(0,e.Lk)("div",{class:"order__btn",onClick:s[0]||(s[0]=(...t)=>r.handleSubmmit&&r.handleSubmmit(...t))},"提交订单")]),r.showOrder?((0,e.uX)(),(0,e.CE)("div",y,[(0,e.Lk)("div",K,[s[4]||(s[4]=(0,e.Lk)("h3",{class:"mask__content__title"},"确认要离开收银台吗？",-1)),s[5]||(s[5]=(0,e.Lk)("p",{class:"mask__content__desc"},"请尽快完成支付，否则将被取消",-1)),(0,e.Lk)("div",P,[(0,e.Lk)("div",{class:"mask__content__btn mask__content__btn--first",onClick:s[1]||(s[1]=()=>r.handleConfirmOrder(!0))},"取消订单"),(0,e.Lk)("div",{class:"mask__content__btn mask__content__btn--last",onClick:s[2]||(s[2]=()=>r.handleConfirmOrder(!1))}," 确认支付")])])])):(0,e.Q3)("",!0)],64)}c(4114);var j=c(782),x=c(144),B=c(5067);const T=(t,s,c)=>{const e=(0,i.rd)(),r=(0,j.Pj)(),a=async a=>{const n=[];for(let t in c.value){const s=c.value[t];n.push({id:parseInt(s.id,10),num:s.count})}try{const c=await(0,B.b)("/api/order",{addressId:1,shopId:t,shopName:s.value,isCanceled:a,products:n});0===c?.errno&&(r.commit("clearCartData",t),e.push({name:"OrderList"}))}catch(o){}};return{handleConfirmOrder:a}},q=()=>{const t=(0,x.KR)(!1),s=()=>{t.value=!0};return{handleSubmmit:s,showOrder:t}};var D={name:"Order",setup(){const t=(0,i.lq)(),s=parseInt(t.params.id,10),{calculations:c,shopName:e,productList:r}=(0,w.K)(s),{handleConfirmOrder:a}=T(s,e,r),{handleSubmmit:n,showOrder:o}=q();return{calculations:c,handleConfirmOrder:a,handleSubmmit:n,showOrder:o}}};const Q=(0,l.A)(D,[["render",S],["__scopeId","data-v-2d5c8222"]]);var R=Q,U={name:"OrderConfirmation",components:{TopArea:p,ProductList:N,Order:R}};const z=(0,l.A)(U,[["render",a],["__scopeId","data-v-0a127bb2"]]);var G=z}}]);
//# sourceMappingURL=orderConfirmation.7c95a068.js.map