"use strict";(self["webpackChunkjingdong"]=self["webpackChunkjingdong"]||[]).push([[966],{373:function(s,e,a){a.d(e,{A:function(){return d},g:function(){return i}});var n=a(6768),o=a(4232);const t={class:"toast"};function r(s,e,a,r,l,c){return(0,n.uX)(),(0,n.CE)("div",t,(0,o.v_)(a.message),1)}var l=a(144),c={props:["message"]};const i=()=>{const s=(0,l.Kh)({show:!1,toastMessage:""}),e=e=>{s.show=!0,s.toastMessage=e,setTimeout((()=>{s.show=!1,s.toastMessage=""}),2e3)},{show:a,toastMessage:n}=(0,l.QW)(s);return{show:a,toastMessage:n,showToast:e}};var u=a(1241);const p=(0,u.A)(c,[["render",r],["__scopeId","data-v-2a66ba7c"]]);var d=p},4519:function(s,e,a){a.r(e),a.d(e,{default:function(){return k}});var n=a(6768),o=a(5130);const t={class:"wrapper"},r={class:"wrapper__input"},l={class:"wrapper__input"};function c(s,e,a,c,i,u){const p=(0,n.g2)("Toast");return(0,n.uX)(),(0,n.CE)("div",t,[e[4]||(e[4]=(0,n.Lk)("img",{class:"wrapper__img",src:"http://www.dell-lee.com/imgs/vue3/user.png"},null,-1)),(0,n.Lk)("div",r,[(0,n.bo)((0,n.Lk)("input",{class:"wrapper__input__content",placeholder:"用户名","onUpdate:modelValue":e[0]||(e[0]=s=>c.username=s)},null,512),[[o.Jo,c.username]])]),(0,n.Lk)("div",l,[(0,n.bo)((0,n.Lk)("input",{type:"password",class:"wrapper__input__content",placeholder:"请输入密码","onUpdate:modelValue":e[1]||(e[1]=s=>c.password=s)},null,512),[[o.Jo,c.password]])]),(0,n.Lk)("div",{class:"wrapper__login-button",onClick:e[2]||(e[2]=(...s)=>c.handleLogin&&c.handleLogin(...s))},"登录"),(0,n.Lk)("div",{class:"wrapper__login-link",onClick:e[3]||(e[3]=(...s)=>c.handleRegisterClick&&c.handleRegisterClick(...s))},"立即注册"),c.show?((0,n.uX)(),(0,n.Wv)(p,{key:0,message:c.toastMessage},null,8,["message"])):(0,n.Q3)("",!0)])}a(4114);var i=a(144),u=a(1387),p=a(5067),d=a(373);const g=s=>{const e=(0,u.rd)(),a=(0,i.Kh)({username:"",password:""}),n=async()=>{try{const n=await(0,p.b)("/api/login",{username:a.username,password:a.password});0===n?.errno?(localStorage.isLogin=!0,e.push({name:"Home"})):s("登录失败")}catch(n){s("请求失败")}},{username:o,password:t}=(0,i.QW)(a);return{username:o,password:t,handleLogin:n}},w=()=>{const s=(0,u.rd)(),e=()=>{s.push({name:"Register"})};return{handleRegisterClick:e}};var h={name:"Login",components:{Toast:d.A},setup(){const{show:s,toastMessage:e,showToast:a}=(0,d.g)(),{username:n,password:o,handleLogin:t}=g(a),{handleRegisterClick:r}=w();return{username:n,password:o,handleLogin:t,handleRegisterClick:r,show:s,toastMessage:e}}},m=a(1241);const _=(0,m.A)(h,[["render",c],["__scopeId","data-v-b10154ec"]]);var k=_}}]);
//# sourceMappingURL=login.370be521.js.map